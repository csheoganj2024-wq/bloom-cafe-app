<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bloom Cafe</title>
<style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f8f8f8; }
    header { background: #ff6f61; color: white; padding: 15px; text-align: center; }
    .container { max-width: 800px; margin: auto; padding: 20px; }
    .menu-item, .order-item { display: flex; justify-content: space-between; margin: 10px 0; padding: 10px; background: white; border-radius: 8px; }
    button { padding: 5px 10px; cursor: pointer; }
    input, select { padding: 5px; margin: 5px 0; width: 100%; }
    .hidden { display: none; }
</style>
</head>
<body>

<header>
    <h1>Bloom Cafe</h1>
    <p>Contact: 9001160228 | Address: Deora Plaza, Kesarpura Road, Sheoganj</p>
</header>

<div class="container">

<!-- Login Page -->
<div id="loginPage">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username (manager/kitchen)">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>
</div>

<!-- Manager Page -->
<div id="managerPage" class="hidden">
    <h2>Menu Management</h2>
    <input type="text" id="itemName" placeholder="Item Name">
    <input type="text" id="itemDesc" placeholder="Description">
    <input type="number" id="itemPrice" placeholder="Price">
    <input type="text" id="itemImage" placeholder="Image URL">
    <button onclick="addMenuItem()">Add Item</button>

    <h3>Menu Items</h3>
    <div id="menuList"></div>
</div>

<!-- Kitchen Page -->
<div id="kitchenPage" class="hidden">
    <h2>Orders</h2>
    <div id="orderList"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// Your Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCY_PYp0VxGmm4d9OuKRqDRkp-ZCOMLRjU",
  authDomain: "bloom-cafe-7d929.firebaseapp.com",
  projectId: "bloom-cafe-7d929",
  storageBucket: "bloom-cafe-7d929.firebasestorage.app",
  messagingSenderId: "35820544683",
  appId: "1:35820544683:web:e26dcea6301e4c9a9e8dee",
  measurementId: "G-JP1R587JCC"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Simple login (hardcoded)
function login() {
    const user = document.getElementById('username').value.toLowerCase();
    const pass = document.getElementById('password').value;

    if(user === 'manager' && pass === '1234') {
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('managerPage').classList.remove('hidden');
        loadMenuItems();
    } else if(user === 'kitchen' && pass === '1234') {
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('kitchenPage').classList.remove('hidden');
        loadOrders();
    } else {
        alert('Invalid credentials!');
    }
}

// Manager: Add Menu Item
function addMenuItem() {
    const name = document.getElementById('itemName').value;
    const desc = document.getElementById('itemDesc').value;
    const price = parseFloat(document.getElementById('itemPrice').value);
    const image = document.getElementById('itemImage').value;

    if(!name || !desc || !price) { alert('Please fill all fields'); return; }

    db.collection('menu').add({ name, desc, price, image })
    .then(() => {
        alert('Item added!');
        document.getElementById('itemName').value = '';
        document.getElementById('itemDesc').value = '';
        document.getElementById('itemPrice').value = '';
        document.getElementById('itemImage').value = '';
        loadMenuItems();
    });
}

// Load Menu Items
function loadMenuItems() {
    const menuList = document.getElementById('menuList');
    menuList.innerHTML = '';
    db.collection('menu').get().then(snapshot => {
        snapshot.forEach(doc => {
            const item = doc.data();
            const div = document.createElement('div');
            div.classList.add('menu-item');
            div.innerHTML = `
                <span>${item.name} - â‚¹${item.price}</span>
                <button onclick="deleteItem('${doc.id}')">Delete</button>
            `;
            menuList.appendChild(div);
        });
    });
}

// Delete Menu Item
function deleteItem(id) {
    db.collection('menu').doc(id).delete().then(() => loadMenuItems());
}

// Kitchen: Load Orders
function loadOrders() {
    const orderList = document.getElementById('orderList');
    orderList.innerHTML = '';
    db.collection('orders').orderBy('timestamp', 'desc').get().then(snapshot => {
        snapshot.forEach(doc => {
            const order = doc.data();
            const div = document.createElement('div');
            div.classList.add('order-item');
            div.innerHTML = `
                <span>${order.itemName} - ${order.status}</span>
                <button onclick="updateStatus('${doc.id}', '${order.status}')">Next Status</button>
            `;
            orderList.appendChild(div);
        });
    });
}

// Update Order Status
function updateStatus(id, currentStatus) {
    let newStatus = '';
    if(currentStatus === 'pending') newStatus = 'preparing';
    else if(currentStatus === 'preparing') newStatus = 'ready';
    else newStatus = 'completed';

    db.collection('orders').doc(id).update({ status: newStatus })
    .then(() => loadOrders());
}
</script>

</body>
</html>
